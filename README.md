# Conversation Street BOT for Think Life

Project for leads generation commissioned from the Prince of Gambia.


## Docker - Development Enviroment

### TEST ENV

http://localhost:8081/conversation-#.html

**API BOT**

http://localhost:9000/


## Folders

- `src`: Source code for JS and SCSS. Images need to be added here
- `web`: web root (for poduction)
- `test`: testing web root


---

# INSTALLATION

## Getting started: prepare your computer

If you already have the following tools installed, skip this section.

### NPM 6.9+ & Node.js 12.4+

Install it now. (https://nodejs.org)

<!-- ### GULP CLI 2.0+

```
npm install --global gulp-cli
``` -->

### Docker (for preview & testing)

Be sure that the `docker` & `docker-compose` are installed.

https://www.docker.com/get-started

More info: https://docs.docker.com/install/

---

## Install all the project dependencies

```
npm i
```

`NPM` not on your computer? Install it now. (https://nodejs.org)

---

## Usage

You can use this repo in different way. Here the list for an easy understanding.


### Build the package

Build all the distribution parts of the package (`/dist/` & `wp-content/themes/{theme_name}/dist/`).

```
npm run build
```


### Developer mode

To expand and add functionalities, please run this command and edit in the `/src/` folder. The code will be rebuilt on fly and automatically refreshed on the browser.

```
npm run dev
```


### Clean all the generate code

Delete all the generated files inside `/dist/`, `/tmp/` and inside the wordpress theme `/web/../dist/`.

```
npm run clean
```

### Rebuild the package

Rebuild all the distribution parts of the package (`/dist/` & `/web/../dist/`). **This task will initially clean (delete) all the previous generated files.**

```
npm run rebuild
```

## Development

**Build and start**

```
docker-compose up -d
```

**Then open in your browser**

```
http://localhost:9000
```

**Stop**

```
docker-compose stop
```

**Shutdown**

This removes the containers and default network.

```
docker-compose down
```

More info about [Docker compose](https://docs.docker.com/compose)

---

# How to use the conversation bot app

The conversation bot can be embedded in any web page just simply adding a special HTML tag and a JavaScript.

```html
<html>
...
<body>
...
<div id="thinklife-conversation-1" data-mcid="15016" data-redirect="/thank-you/"></div>
...
<script defer src="bot/dist/conversation-1.js">
</body>
</html>
```

The `<div>` tag with `id="thinklife-conversation-1"` will be replace with the conversation bot app that is generated by the JavaScript.

The app will simulate a conversation bot that will ask the user few questions to collect some information that will be submitted to a Lunar CRM campaign. The `campaign ID` can be set in the attribute `data-mcid="15016"`.

On completion the app will redirect to a `/thank-you/` page hosted on the website (not part of the app). This page can be set using the attribute `data-redirect="/thank-you/"`.

NB: The only limitation is that the JavaScript file must be hosted on the same domain (or subdomain) where the `/api/` folder is also hosted. Normally on https://bot.think-life.uk/dist/conversation-1.js

